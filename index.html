<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>渠垌更換小型工程流程圖</title>
    <script defer src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script defer src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script defer src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
    <script defer src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        font-family: ui-sans-serif, system-ui, sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <div id="root" class="max-w-4xl mx-auto p-6"></div>

    <script type="text/babel">
      const { useState } = React;
      const { motion, AnimatePresence } = window['framer-motion'];

      const steps = [
        {
          title: '1. 現場勘查及技術評估 / Site Inspection & Technical Assessment',
          details: '檢查渠垌損壞程度、尺寸、樓層範圍與更換必要性。\nCheck pipe condition, dimensions, and replacement necessity.',
        },
        {
          title: '2. 確認是否屬小型工程 / Confirm Minor Works Classification',
          details: '根據《小型工程監管制度》，通常屬III級工程。\nUsually falls under Class III Minor Works as per regulations.',
        },
        {
          title: '3. 委任註冊人士 / Appoint Registered Personnel',
          details: '委任註冊小型工程承建商（RMWC）及T3技術人員。\nAppoint RMWC and T3 registered personnel.',
        },
        {
          title: '4. 提交 Form MW03 / Submit Form MW03',
          details: '提交施工圖（包括去水圖）、方法、安全計劃等至屋宇署。\nSubmit plans (including drainage layout), method statements, and safety plan.',
        },
        {
          title: '5. 等候備案 / Await Acknowledgement',
          details: '屋宇署備案，不需批准；可於通知期滿後開工。\nWorks may commence after 7-day notification period.',
        },
        {
          title: '6. 關閉總渠及拆除 / Shut Down & Remove',
          details: '關閉總排水管，清拆舊渠垌。\nShut off main pipe and remove old piping.',
        },
        {
          title: '7. 安裝新渠垌 / Install New Pipe',
          details: '安裝新渠垌，確保尺寸、物料及斜度符合標準。\nInstall new pipe with proper slope and approved materials.',
        },
        {
          title: '8. 測試及檢查 / Testing and Inspection',
          details: '水密測試及接駁檢查。\nPerform water-tightness and connection tests.',
        },
        {
          title: '9. 修復與清理 / Restore and Clean Up',
          details: '修補牆身地面，清理現場。\nRestore wall/floor and clean construction site.',
        },
        {
          title: '10. 提交 Form MW04 / Submit Form MW04',
          details: '提交完成報告與相片記錄。\nSubmit completion report and photo documentation.',
        },
        {
          title: '11. 工程完成 / Completion',
          details: '確認無漏水與異味後結束。\nConfirm no leakage or odor before handover.',
        },
      ];

      function WorkflowApp() {
        const [openIndex, setOpenIndex] = useState(null);
        const toggleStep = (index) => {
          setOpenIndex(openIndex === index ? null : index);
        };

        return (
          <div>
            <h1 className="text-3xl font-bold mb-6 text-blue-700 text-center">
              商業大廈渠垌更換 - 小型工程申報流程（中英對照）
            </h1>
            <div className="space-y-4 mb-10">
              {steps.map((step, index) => (
                <div key={index} className="border border-blue-200 rounded shadow-sm overflow-hidden">
                  <button onClick={() => toggleStep(index)} className="w-full text-left px-4 py-3 bg-blue-50 hover:bg-blue-100 transition font-medium">
                    {step.title}
                  </button>
                  <AnimatePresence>
                    {openIndex === index && (
                      <motion.div
                        initial={{ height: 0, opacity: 0 }}
                        animate={{ height: 'auto', opacity: 1 }}
                        exit={{ height: 0, opacity: 0 }}
                        className="px-4 py-3 bg-white text-sm whitespace-pre-line"
                      >
                        {step.details}
                      </motion.div>
                    )}
                  </AnimatePresence>
                </div>
              ))}
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<WorkflowApp />);
    </script>
  </body>
</html>
